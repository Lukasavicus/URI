
	<!DOCTYPE html>
	<html>
		<head>
			<title>URI 2213 - A Safe Bet</title>
			<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
			<meta name="author" content="URI Online Judge; www.urionlinejudge.edu.br" />
			<meta name="description" content="URI Online Judge - Problema 2213 - A Safe Bet" />

			<link href="https://fonts.googleapis.c					<center> <img src="https://www.urionlinejudge.com.br/gallery/images/contests/UOJ_152_I.png" alt="" width="700"></center>
			<link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="https://urionlinejudge.r.worldssl.net/repository/contest.css" />

	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-28047757-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-28047757-1');
	</script>
		</head>
		<body>

			<div class="header">
				<span>URI Online Judge | 2213</span>
				<h1>A Safe Bet</h1>
				<div>
					<p>Por ICPC 2012 World Finals <img src='https://urionlinejudge.r.worldssl.net/gallery/images/flags/pl.gif' alt='PL' /> Poland</p>
				</div>
				<strong>Timelimit: 10</strong>
			</div>

			<div class="problem">

				<div class="description">
					<p>Safe Ltd. is a company that manufactures high-quality safes. Its latest invention is an optical closure mechanism that uses a laser beam passing through a rectangular grid with several mirrors.</p>

					<center> <img src="https://www.urionlinejudge.com.br/gallery/images/contests/UOJ_152_I.png" alt="" width="700"></center>
					<p>When the laser is activated, a beam enters the top row of the grid horizontally from the left. The beam is reflected by every mirror that it hits. Each mirror has a 45 degree diagonal orientation, either / or \ . If the beam exits the bottom row of the grid horizontally to the right, it is detected and the safe opens (see the left side of the figure above). Otherwise the safe remains closed and an alarm is raised.</p>

					<p>Each safe has a missing mirror, which prevents the laser beam from traveling successfully through the grid (see the right side of the figure above). The safe has a mechanism that enables the user to drop a single mirror into any empty grid cell. A legitimate user knows the correct position and orientation of the missing mirror ( / in row 4 column 3 above) and can thus open the safe. Without this knowledge the user has to guess correctly, which can be difficult for safes with large grids.</p>

					<p>Your job is to determine if particular safes are actually secure. A secure safe does not open right away without inserting a mirror, and there is at least one valid location and orientation for the missing mirror. There may indeed be multiple such locations and orientations.</p>
				</div>

				<h2>Entrada</h2>

				<div class="input">
					<p>Each test case describes a single safe and starts with a line containing four integer numbers <strong>r</strong>, <strong>c</strong>, <strong>m</strong>, and <strong>n</strong> (1 ≤ <strong>r</strong>, <strong>c</strong> ≤ 1 000 000 and 0 ≤ <strong>m</strong>, <strong>n</strong> ≤ 200 000). The mechanism’s grid has <strong>r</strong> rows and <strong>c</strong> columns. Each of the next <strong>m</strong> lines contains two integer numbers <strong>r<sub>i</sub></strong> and <strong>c<sub>i</sub></strong> (1 ≤ <strong>r<sub>i</sub></strong> ≤ <strong>r</strong> and 1 ≤ <strong>c<sub>i</sub></strong> ≤ <strong>c</strong>) specifying that there is a / mirror in row <strong>r<sub>i</sub></strong> column <strong>c<sub>i</sub></strong> . The following <strong>n</strong> lines specify the positions of the \ mirrors in the same way. The <strong>m</strong> + <strong>n</strong> positions of the mirrors are pairwise distinct.</p>
				</div>

				<h2>Saída</h2>

				<div class="output">
					<p>For each test case, display its case number followed by:</p>

					<ul>
						<li>0 if the safe opens without inserting a mirror.</li>
						<li><strong>k</strong> <strong>r</strong> <strong>c</strong> if the safe does not open without inserting a mirror, there are exactly <strong>k</strong> positions where inserting a mirror opens the safe, and (<strong>r</strong>, <strong>c</strong>) is the lexicographically smallest such row, column position. A position where both a / and a \ mirror open the safe counts just once.</li>
						<li>'impossible' if the safe cannot be opened with or without inserting a mirror.</li>
					</ul>
				</div>

				<div class="both"></div>

				<table>
					<thead>
						<tr>
							<td>Exemplo de Entrada</td>
							<td>Exemplo de Saída</td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td class="division">
								<p>5 6 1 4</p>

								<p>2 3</p>

								<p>1 2</p>

								<p>2 5</p>

								<p>4 2</p>

								<p>5 5</p>

								<p>100 100 0 2</p>

								<p>1 77</p>

								<p>100 77</p>

								<p>100 100 0 0</p>

							</td>
							<td>
								<p>Case 1: 2 4 3</p>

								<p>Case 2: 0</p>

								<p>Case 3: impossible</p>

							</td>
						</tr>
					</tbody>
				</table>

				<div class="both"></div>
	
				<p class="footer">
					ICPC 2012 World Finals
				</p>
			</div>

		</body>
	</html>