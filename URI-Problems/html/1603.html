<!DOCTYPE html>
    <html>
        <head>
            <title>URI 1603 - Canais de Qanat</title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <meta name="author" content="URI Online Judge; www.urionlinejudge.edu.br" />
            <meta name="description" content="URI Online Judge - Problema 1603 - Canais de Qanat" />

            <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="https://urionlinejudge.r.worldssl.net/repository/default.css" />

	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-28047757-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-28047757-1');
	</script>
        </head>
        <body>

            <div class="header">
                <span>URI Online Judge | 1603</span>
                <h1>Canais de Qanat</h1>
                <div>
                    <p>Por Marcio T. I. Oshiro <img src="https://urionlinejudge.r.worldssl.net/gallery/images/flags/br.gif" alt="" style="width: 16px; height: 11px; "> Brasil</p>
                </div>
                <strong>Timelimit: 1</strong>
            </div>

            <div class="problem">

                <div class="description">
                    <p>A medina de Marrakech é formada pela cidade fortificada, patrimônio universal da Unesco desde 1995. O início de sua construção remonta à fundação da cidade no século XI e inclui vários monumentos impressionantes, como a mesquita de Koutoubia, madraçal de Ben Youssef, e o Palácio Bahia. Várias histórias cercam os monumentos que formam a medina. A mais interessante diz respeito os jardins Ménara. O parque tem hortas e lagos artificiais construídos na época do sultão. Abd-el-Rhaman, que era um apaixonado por desafios matemáticos. Um dos mais brilhantes é o dos conjuntos de canais de qanat (قناة). Cada conjunto é formado por um canal fechado e um canal aberto. O canal fechado tem o formato de um polígono e o canal aberto consiste de uma sequência de arestas formando um caminho. O desafio é determinar se é possível transformar o canal fechado no canal aberto através de operações mentais sobre o canal fechado, como de remoção de vértices e arestas, translações e rotações (no plano).</p>

                    <p>Os canais são dados através das coordenadas dos seus vértices e a ordem na qual os vértices são dados indica o sentido do fluxo de água. Consideramos que é possível transformar o canal fechado no aberto se após a aplicação das operações, o canal resultante tem as mesmas coordenadas e a água flui no mesmo sentido.</p>

                    <p class="center"><img src="https://urionlinejudge.r.worldssl.net/gallery/images/contests/canals.png" alt="" /></p>

                    <p class="center">Figura 1. Ilustração primeiro (esq.) e segundo (dir.) exemplos de entrada.</p>

                </div>

                <h2>Entrada</h2>

                <div class="input">
                    <p>A entrada é composta por diversas instâncias e termina com final de arquivo (EOF).</p>

                    <p>A primeira linha de cada instância contém dois inteiros <strong>N<sub>f</sub></strong> (3 ≤ <strong>N<sub>f</sub></strong> ≤ 20.000) e <strong>N<sub>a</sub></strong> (2 ≤ <strong>N<sub>a</sub></strong> ≤ 5.000), correspondendo ao número de vértices dos canais fechado e aberto, respectivamente. A linha seguinte contém <strong>N<sub>f</sub></strong> pares de inteiros (<strong>x<sub>i</sub></strong> , <strong>y<sub>i</sub></strong>) (−10.000 ≤ <strong>x</strong>, <strong>y</strong> ≤ 10.000), cada par representando a coordenada de um vértice do canal fechado. No canal fechado a água sempre flui no sentido anti-horário e os vértices são númerados de 1 a <strong>N<sub>f</sub></strong> . A terceira e última linha contém Na pares de inteiros (<strong>x<sub>i</sub></strong> , <strong>y<sub>i</sub></strong>) correspondendo aos vértices do canal aberto.</p>

                </div>

                <h2>Saída</h2>

                <div class="output">
                    <p>Para cada instância imprima -1, se não é possível transformar o canal fechado no aberto, ou o menor índice do vértice do canal fechado que coincide com primeiro vértice do canal aberto após a transformação.</p>

                </div>

                <div class="both"></div>

                <table>
                    <thead>
                        <tr>
                            <td>Exemplo de Entrada</td>
                            <td>Exemplo de Saída</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="division">
                                <p>4 2<br />
0 0 4 3 0 6 -4 3<br />
2 -1 2 4<br />
4 3<br />
0 0 4 3 0 6 -4 3<br />
5 0 5 5 4 5</p>

                            </td>
                            <td>
                                <p>1<br />
-1</p>


                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <p class="footer">
                    Teu moinho gira para a direita ou para a esquerda? – Sei lá, o importante é que ele me dá farinha!<br/>
                    Preliminar Maratona (Seletiva IME-USP)
                </p>
            </div>

        </body>
    </html>