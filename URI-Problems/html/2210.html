
	<!DOCTYPE html>
	<html>
		<head>
			<title>URI 2210 - Keys</title>
			<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
			<meta name="author" content="URI Online Judge; www.urionlinejudge.edu.br" />
			<meta name="description" content="URI Online Judge - Problema 2210 - Keys" />

			<link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700" rel="stylesheet" type="text/css">
			<link rel="stylesheet" type="text/css" href="https://urionlinejudge.r.worldssl.net/repository/contest.css" />

	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-28047757-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-28047757-1');
	</script>
		</head>
		<body>

			<div class="header">
				<span>URI Online Judge | 2210</span>
				<h1>Keys</h1>
				<div>
					<p>Por ICPC 2012 World Finals <img src='https://urionlinejudge.r.worldssl.net/gallery/images/flags/pl.gif' alt='PL' /> Poland</p>
				</div>
				<strong>Timelimit: 5</strong>
			</div>

			<div class="problem">

				<div class="description">
					<p>Adam carries a bunch of keys attached to key rings, some of which may be connected to each other. The rings are common key rings, so a key can be attached to or detached from a ring by sliding along the spiral. In the same way, two rings can be connected or disconnected. Adam wants to give some of the keys to Brenda. Since manipulating the keys and rings is often an annoying task (and also dangerous to one’s fingernails), Adam is looking for a way to minimize the number of key and ring operations.</p>

					<p>Every key attachment, key detachment, ring connection, or ring disconnection is considered one operation. Since manipulating two rings is significantly easier than sliding a key, we first want to minimize the number of keys being detached and attached. Among solutions with the same minimal number of key operations, you need to find the one with the minimal number of ring connections and disconnections.</p>

					<p>When all the operations are complete, Adam and Brenda must each carry one connected group of rings and keys. The only exception is when either of them would have no keys at all—in such a case, no ring is needed. Each key must be attached to exactly one ring. Some rings (but not keys) may be considered leftovers and may remain disconnected from the two groups.</p>

					<p>The left side of the following figure shows an initial configuration consisting of four keys on three rings. Adam wishes to give Brenda the two keys labeled N and R. This can be accomplished by two key operations and one ring operation, resulting in the configuration shown on the right side of the figure.</p>

					<center> <img src="https://www.urionlinejudge.com.br/gallery/images/contests/UOJ_152_F.png" width="700" alt="keys"> </center>
				</div>

				<h2>Entrada</h2>

				<div class="input">
					<p>Each test case contains one or more lines, each containing a two letter string. Lowercase letters (a - z) represent key rings and uppercase letters (A - Z) represent keys. The two letters on a line specify either a key attached to a ring or two rings connected together. The end of each test case is denoted by a line containing the digit zero.</p>

					<p>Keys denoted by letters A through M remain with Adam, and keys denoted by letters N through Z are given to Brenda.</p>

					<p>No line contains two uppercase letters. No pair of letters are specified more than once in the same test case. Each key is connected to exactly one ring. There are no “circles” in the ring configurations (disconnecting any two rings will increase the number of connected groups). All existing keys and rings are mentioned at least once.</p>
				</div>

				<h2>Saída</h2>

				<div class="output">
					<p>For each test case, display the case number followed by the minimal number of key attach/detach operations and the minimal number of ring connect/disconnect operations.</p>

					<p>If there is no way to split the keys as requested, display the case number and the word 'impossible' instead of the two integers.</p>
				</div>

				<div class="both"></div>

				<table>
					<thead>
						<tr>
							<td>Exemplo de Entrada</td>
							<td>Exemplo de Saída</td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td class="division">
								<p>ab</p>

								<p>bc</p>

								<p>aA</p>

								<p>aN</p>

								<p>Rb</p>

								<p>cB</p>

								<p>0</p>

								<p>aA</p>

								<p>bB</p>

								<p>Cc</p>

								<p>0</p>

								<p>aA</p>

								<p>aZ</p>

								<p>0</p>

								<p>aA</p>

								<p>bB</p>

								<p>cC</p>

								<p>xX</p>

								<p>yY</p>

								<p>ax</p>

								<p>xb</p>

								<p>by</p>

								<p>yc</p>

								<p>0</p>

							</td>
							<td>
								<p>Case 1: 2 1</p>

								<p>Case 2: 0 2</p>

								<p>Case 3: impossible</p>

								<p>Case 4: 0 7</p>

							</td>
						</tr>
					</tbody>
				</table>

				<div class="both"></div>
	
				<p class="footer">
					ICPC 2012 World Finals
				</p>
			</div>

		</body>
	</html>